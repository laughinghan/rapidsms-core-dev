{% extends "layout.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="three-columns">
  <div class="col-1">
    {% for widget in col1 %}
      <div class="module">
        <h2>{{ widget.title }}</h2>
        <div class="toolbar">
          <a href="/dashboard/del/?base_id={{ widget.base_id }}" class="remove">Remove</a>
        </div>
        {% for entry in widget.data.all %}
        <p>{{ entry.label }}: {{ entry.derivative.data}}
        {% endfor %}
      </div>
    {% endfor %}
    <div class="module">
      <form method="get" action="/dashboard/add/">
      <h2>New Widget</h2>
        <input type="hidden" name="column" value=1 />
        <input type="text" name="title" value="Title" />
        <br>
        <select name="model">
          <option value="">Model:</option>
          {% for model in models %}
          <option value="{{ model.id }}">{{ model.name }}</option>
          {% endfor %}
        </select>
        <br>
        <br>
        <input type="submit" value="Add to this column" />
      </form>
    </div>
  </div>
  <div class="col-2">
    {% for widget in col2 %}
      <div class="module">
        <h2>{{ widget.title }}</h2>
        <div class="toolbar">
          <a href="/dashboard/del/?base_id={{ widget.base_id }}" class="remove">Remove</a>
        </div>
        {% for entry in widget.data.all %}
        <p>{{ entry.label }}: {{ entry.derivative.data}}
        {% endfor %}
      </div>
    {% endfor %}
    <div class="module">
      <form method="get" action="/dashboard/add/">
      <h2>New Widget</h2>
        <input type="hidden" name="column" value=2 />
        <input type="text" name="title" value="Title" />
        <br>
        <select name="model">
          <option value="">Model:</option>
          {% for model in models %}
          <option value="{{ model.id }}">{{ model.name }}</option>
          {% endfor %}
        </select>
        <br>
        <br>
        <input type="submit" value="Add to this column" />
      </form>
    </div>
  </div>
  <div class="col-3">
    {% for widget in col3 %}
      <div class="module">
        <h2>{{ widget.title }}</h2>
        <div class="toolbar">
          <a href="/dashboard/del/?base_id={{ widget.base_id }}" class="remove">Remove</a>
        </div>
        {% for entry in widget.data.all %}
        <p>{{ entry.label }}: {{ entry.derivative.data }}
        {% endfor %}
      </div>
    {% endfor %}
    <div class="module">
      <form method="get" action="/dashboard/add/">
      <h2>New Widget</h2>
        <input type="hidden" name="column" value=3 />
        <input type="text" name="title" value="Title" />
        <br>
        <select name="model">
          <option value="">Model:</option>
          {% for model in models %}
          <option value="{{ model.id }}">{{ model.name }}</option>
          {% endfor %}
        </select>
        <br>
        <br>
        <input type="submit" value="Add to this column" />
      </form>
    </div>
  </div>
</div>
{% endblock %}
